{"version":3,"sources":["../src/_internal/zod-schemas/blobref.ts","../src/_internal/zod-schemas/file.ts"],"names":["z","CID","BlobRef"],"mappings":";;;;;;;;;;;AAKA,IAAM,sBAAA,GAAyBA,mBAAE,MAAA,CAAO;AAAA,EACtC,KAAA,EAAOA,kBAAA,CAAE,OAAA,CAAQ,oBAAoB,CAAA;AAAA,EACrC,GAAA,EAAKA,mBAAE,MAAA,CAAO;AAAA,IACZ,KAAA,EAAOA,mBAAE,MAAA;AAAO,GACjB,CAAA;AAAA,EACD,QAAA,EAAUA,mBAAE,MAAA,EAAO;AAAA,EACnB,IAAA,EAAMA,mBAAE,MAAA;AACV,CAAC;AAID,IAAM,SAAA,GAAY,CAAC,KAAA,KAA4B;AAC7C,EAAA,MAAM,WAAkDC,OAAA,CAAI,KAAA;AAAA,IAC1D,MAAM,GAAA,CAAI;AAAA,GACZ;AACA,EAAA,OAAOC,YAAQ,WAAA,CAAY;AAAA,IACzB,KAAA,EAAO,MAAA;AAAA,IACP,GAAA,EAAK,QAAA;AAAA,IACL,UAAU,KAAA,CAAM,QAAA;AAAA,IAChB,MAAM,KAAA,CAAM;AAAA,GACb,CAAA;AACH;AAEA,IAAM,kBAAA,GAAqB,CAAC,OAAA,KAAuC;AACjE,EAAA,MAAM,IAAA,GAAO,QAAQ,MAAA,EAAO;AAG5B,EAAA,OAAO;AAAA,IACL,KAAA,EAAO,oBAAA;AAAA,IACP,KAAK,IAAA,CAAK,GAAA;AAAA,IACV,UAAU,IAAA,CAAK,QAAA;AAAA,IACf,MAAM,IAAA,CAAK;AAAA,GACb;AACF;ACpCO,IAAM,mBAAA,GAAsBF,mBAAE,MAAA,CAAO;AAAA,EAC1C,IAAA,EAAMA,mBAAE,MAAA,EAAO;AAAA,EACf,IAAA,EAAMA,mBAAE,MAAA,EAAO;AAAA,EACf,UAAA,EAAYA,mBAAE,MAAA;AAChB,CAAC;AAIM,IAAM,MAAA,GAAS,OAAO,aAAA,KAAiC;AAC5D,EAAA,MAAM,OAAO,IAAI,IAAA;AAAA,IACf,CAAC,MAAA,CAAO,IAAA,CAAK,aAAA,CAAc,UAAA,EAAY,QAAQ,CAAC,CAAA;AAAA,IAChD,aAAA,CAAc,IAAA;AAAA,IACd,EAAE,IAAA,EAAM,aAAA,CAAc,IAAA;AAAK,GAC7B;AACA,EAAA,OAAO,IAAA;AACT;AAEO,IAAM,eAAA,GAAkB,OAAO,IAAA,KAAe;AACnD,EAAA,OAAO;AAAA,IACL,MAAM,IAAA,CAAK,IAAA;AAAA,IACX,MAAM,IAAA,CAAK,IAAA;AAAA,IACX,UAAA,EAAY,MAAM,IAAA,CACf,WAAA,GACA,IAAA,CAAK,CAAC,MAAA,KAAW,MAAA,CAAO,IAAA,CAAK,MAAM,CAAA,CAAE,QAAA,CAAS,QAAQ,CAAC;AAAA,GAC5D;AACF","file":"zod.cjs","sourcesContent":["import z from \"zod\";\nimport { CID } from \"multiformats/cid\";\nimport type { Version } from \"multiformats/cid\";\nimport { BlobRef } from \"@atproto/api\";\n\nconst BlobRefGeneratorSchema = z.object({\n  $type: z.literal(\"blob-ref-generator\"),\n  ref: z.object({\n    $link: z.string(),\n  }),\n  mimeType: z.string(),\n  size: z.number(),\n});\n\ntype BlobRefGenerator = z.infer<typeof BlobRefGeneratorSchema>;\n\nconst toBlobRef = (input: BlobRefGenerator) => {\n  const validCID: CID<unknown, number, number, Version> = CID.parse(\n    input.ref.$link\n  );\n  return BlobRef.fromJsonRef({\n    $type: \"blob\",\n    ref: validCID,\n    mimeType: input.mimeType,\n    size: input.size,\n  });\n};\n\nconst toBlobRefGenerator = (blobRef: BlobRef): BlobRefGenerator => {\n  const json = blobRef.toJSON() as Omit<BlobRefGenerator, \"$type\"> & {\n    $type: \"blob\";\n  };\n  return {\n    $type: \"blob-ref-generator\",\n    ref: json.ref,\n    mimeType: json.mimeType,\n    size: json.size,\n  };\n};\n\nexport {\n  BlobRefGeneratorSchema,\n  toBlobRef,\n  toBlobRefGenerator,\n  type BlobRefGenerator,\n  BlobRef,\n};\n","import z from \"zod\";\n\nexport const FileGeneratorSchema = z.object({\n  name: z.string(),\n  type: z.string(),\n  dataBase64: z.string(),\n});\n\nexport type FileGenerator = z.infer<typeof FileGeneratorSchema>;\n\nexport const toFile = async (fileGenerator: FileGenerator) => {\n  const file = new File(\n    [Buffer.from(fileGenerator.dataBase64, \"base64\")],\n    fileGenerator.name,\n    { type: fileGenerator.type }\n  );\n  return file;\n};\n\nexport const toFileGenerator = async (file: File) => {\n  return {\n    name: file.name,\n    type: file.type,\n    dataBase64: await file\n      .arrayBuffer()\n      .then((buffer) => Buffer.from(buffer).toString(\"base64\")),\n  };\n};\n"]}