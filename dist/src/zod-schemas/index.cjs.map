{"version":3,"sources":["../../../src/zod-schemas/index.ts","../../../src/zod-schemas/blobref.ts","../../../src/zod-schemas/file.ts"],"sourcesContent":["export * from \"./blobref\";\nexport * from \"./file\";\n\n","import z from \"zod\";\nimport { CID } from \"multiformats/cid\";\nimport type { Version } from \"multiformats/cid\";\nimport { BlobRef } from \"@atproto/lexicon\";\n\nexport const BlobRefGeneratorSchema = z.object({\n  $type: z.literal(\"blob-ref-generator\"),\n  ref: z.object({\n    $link: z.string(),\n  }),\n  mimeType: z.string(),\n  size: z.number(),\n});\n\nexport type BlobRefGenerator = z.infer<typeof BlobRefGeneratorSchema>;\n\nexport const toBlobRef = (input: BlobRefGenerator) => {\n  const validCID: CID<unknown, number, number, Version> = CID.parse(\n    input.ref.$link\n  );\n  return BlobRef.fromJsonRef({\n    $type: \"blob\",\n    ref: validCID,\n    mimeType: input.mimeType,\n    size: input.size,\n  });\n};\n\nexport const toBlobRefGenerator = (blobRef: BlobRef): BlobRefGenerator => {\n  const json = blobRef.toJSON();\n  return {\n    $type: \"blob-ref-generator\",\n    ref: json.ref,\n    mimeType: json.mimeType,\n    size: json.size,\n  };\n};\n","import z from \"zod\";\n\nexport const FileGeneratorSchema = z.object({\n  name: z.string(),\n  type: z.string(),\n  dataBase64: z.string(),\n});\n\nexport type FileGenerator = z.infer<typeof FileGeneratorSchema>;\n\nexport const toFile = async (fileGenerator: FileGenerator) => {\n  const file = new File(\n    [Buffer.from(fileGenerator.dataBase64, \"base64\")],\n    fileGenerator.name,\n    { type: fileGenerator.type }\n  );\n  return file;\n};\n\nexport const toFileGenerator = async (file: File) => {\n  return {\n    name: file.name,\n    type: file.type,\n    dataBase64: await file\n      .arrayBuffer()\n      .then((buffer) => Buffer.from(buffer).toString(\"base64\")),\n  };\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAA,iBAAc;AACd,iBAAoB;AAEpB,qBAAwB;AAEjB,IAAM,yBAAyB,WAAAA,QAAE,OAAO;AAAA,EAC7C,OAAO,WAAAA,QAAE,QAAQ,oBAAoB;AAAA,EACrC,KAAK,WAAAA,QAAE,OAAO;AAAA,IACZ,OAAO,WAAAA,QAAE,OAAO;AAAA,EAClB,CAAC;AAAA,EACD,UAAU,WAAAA,QAAE,OAAO;AAAA,EACnB,MAAM,WAAAA,QAAE,OAAO;AACjB,CAAC;AAIM,IAAM,YAAY,CAAC,UAA4B;AACpD,QAAM,WAAkD,eAAI;AAAA,IAC1D,MAAM,IAAI;AAAA,EACZ;AACA,SAAO,uBAAQ,YAAY;AAAA,IACzB,OAAO;AAAA,IACP,KAAK;AAAA,IACL,UAAU,MAAM;AAAA,IAChB,MAAM,MAAM;AAAA,EACd,CAAC;AACH;AAEO,IAAM,qBAAqB,CAAC,YAAuC;AACxE,QAAM,OAAO,QAAQ,OAAO;AAC5B,SAAO;AAAA,IACL,OAAO;AAAA,IACP,KAAK,KAAK;AAAA,IACV,UAAU,KAAK;AAAA,IACf,MAAM,KAAK;AAAA,EACb;AACF;;;ACpCA,IAAAC,cAAc;AAEP,IAAM,sBAAsB,YAAAC,QAAE,OAAO;AAAA,EAC1C,MAAM,YAAAA,QAAE,OAAO;AAAA,EACf,MAAM,YAAAA,QAAE,OAAO;AAAA,EACf,YAAY,YAAAA,QAAE,OAAO;AACvB,CAAC;AAIM,IAAM,SAAS,OAAO,kBAAiC;AAC5D,QAAM,OAAO,IAAI;AAAA,IACf,CAAC,OAAO,KAAK,cAAc,YAAY,QAAQ,CAAC;AAAA,IAChD,cAAc;AAAA,IACd,EAAE,MAAM,cAAc,KAAK;AAAA,EAC7B;AACA,SAAO;AACT;AAEO,IAAM,kBAAkB,OAAO,SAAe;AACnD,SAAO;AAAA,IACL,MAAM,KAAK;AAAA,IACX,MAAM,KAAK;AAAA,IACX,YAAY,MAAM,KACf,YAAY,EACZ,KAAK,CAAC,WAAW,OAAO,KAAK,MAAM,EAAE,SAAS,QAAQ,CAAC;AAAA,EAC5D;AACF;","names":["z","import_zod","z"]}