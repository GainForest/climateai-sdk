{"version":3,"sources":["../../src/server/utils/claims.ts"],"sourcesContent":["import type { Ecocert } from \"@/types/Ecocert\";\nimport type { OrganizationWithActivities as OrganizationWithActivitiesType } from \"@/server/routers/atproto/hypercerts/claim/activity/getAllAcrossOrgs\";\nimport { getBlobUrl } from \"@/utilities\";\nimport type { SupportedPDSDomain } from \"@/index\";\n\nexport const getEcocertsFromClaimActivities = (\n  activitiesWithOrgInfo: OrganizationWithActivitiesType[],\n  pdsDomain: SupportedPDSDomain\n): Ecocert[] => {\n  const ecocerts: Ecocert[] = [];\n  for (const activityWithOrgInfo of activitiesWithOrgInfo) {\n    const logo = activityWithOrgInfo.organizationInfo.logo;\n    const logoUrl =\n      logo ?\n        getBlobUrl(activityWithOrgInfo.repo.did, logo.image, pdsDomain)\n      : null;\n    for (const activity of activityWithOrgInfo.activities) {\n      ecocerts.push({\n        repo: {\n          did: activityWithOrgInfo.repo.did,\n        },\n        organizationInfo: {\n          name: activityWithOrgInfo.organizationInfo.displayName,\n          logoUrl: logoUrl,\n        },\n        claimActivity: activity,\n      });\n    }\n  }\n  return ecocerts;\n};\n"],"mappings":";AAEA,SAAS,kBAAkB;AAGpB,IAAM,iCAAiC,CAC5C,uBACA,cACc;AACd,QAAM,WAAsB,CAAC;AAC7B,aAAW,uBAAuB,uBAAuB;AACvD,UAAM,OAAO,oBAAoB,iBAAiB;AAClD,UAAM,UACJ,OACE,WAAW,oBAAoB,KAAK,KAAK,KAAK,OAAO,SAAS,IAC9D;AACJ,eAAW,YAAY,oBAAoB,YAAY;AACrD,eAAS,KAAK;AAAA,QACZ,MAAM;AAAA,UACJ,KAAK,oBAAoB,KAAK;AAAA,QAChC;AAAA,QACA,kBAAkB;AAAA,UAChB,MAAM,oBAAoB,iBAAiB;AAAA,UAC3C;AAAA,QACF;AAAA,QACA,eAAe;AAAA,MACjB,CAAC;AAAA,IACH;AAAA,EACF;AACA,SAAO;AACT;","names":[]}